(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],[,,,,,,,,,,,function(e,t,r){e.exports=r.p+"static/media/logo_aviasales.0c089234.svg"},,,function(e,t,r){e.exports=r(26)},,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n=r(4),a=r(5),s=r(8),c=r(7),i=r(0),o=r.n(i),u=r(10),l=r.n(u);r(19),r(20);function f(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("p",{className:"timeout__tip"},"\u0425\u043e\u0442\u0438\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b \u043f\u043e\u0438\u0441\u043a\u0430?"),o.a.createElement("div",{className:"timeout"}))}var m=r(11),p=r.n(m);function d(){return o.a.createElement("div",{className:"logo center"},o.a.createElement("img",{src:p.a,alt:"Aviasales logo",style:{width:"82px"}}))}r(21);var h=r(13);var v=function(e){var t=Object(h.a)(e.filter,3),r=t[0],n=t[1],a=t[2];return o.a.createElement("div",{className:"filter__item",key:r},o.a.createElement("input",{className:"filter__input",type:"checkbox",id:r,checked:n,onChange:function(t){return e.onChange(t)}}),o.a.createElement("label",{className:"filter__label",htmlFor:r},a))};function g(e){var t={all:"\u0412\u0441\u0435",0:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",1:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",2:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",3:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"},r=Object.entries(e.filters).sort((function(e){return-("all"===e[0])}));return r.map((function(e){return e.push(t[e[0]])})),o.a.createElement("form",{className:"form filter"},o.a.createElement("h3",{className:"form__header"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),r.map((function(t,r){return o.a.createElement(v,{filter:t,onChange:function(t){return e.onChange(t)},key:r})})))}function b(e){return o.a.createElement("div",{className:"card row__col-side"},o.a.createElement(g,{filters:e.filters,onChange:e.onChange}))}var E=r(1),k=r.n(E),_=r(2);r(23);function y(e){return o.a.createElement("ul",{className:"tabs card",onClick:function(t){return e.onClick(t)}},o.a.createElement("li",{"data-sorter":"cheapest",className:"tabs__item tabs__item_active"},"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"),o.a.createElement("li",{"data-sorter":"fastest",className:"tabs__item"},"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"))}r(24);function w(e){return o.a.createElement("div",{className:"flight__block"},o.a.createElement("span",{className:"text-grey"},"".concat(e.segment.origin," - ").concat(e.segment.destination)),o.a.createElement("span",{className:"fw-bold"},function(e,t){var r=new Date(e),n=new Date(Date.parse(e)+60*t*1e3),a=r.getHours()<10?"0"+r.getHours():r.getHours(),s=r.getMinutes()<10?"0"+r.getMinutes():r.getMinutes(),c=n.getHours()<10?"0"+n.getHours():n.getHours(),i=n.getMinutes()<10?"0"+n.getMinutes():n.getMinutes();return"".concat(a,":").concat(s," - ").concat(c,":").concat(i)}(e.segment.date,e.segment.duration)))}function N(e){return o.a.createElement("div",{className:"flight__block"},o.a.createElement("span",{className:"text-grey"},function(e){switch(e.length){case 1:return"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430";case 2:return"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438";case 3:return"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438";default:return"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"}}(e.stops)),o.a.createElement("span",{className:"fw-bold"},e.stops.map((function(e,t){return t>0?", "+e:e}))))}function x(e){return o.a.createElement("div",{className:"flight__block"},o.a.createElement("span",{className:"text-grey"},"\u0412 \u043f\u0443\u0442\u0438"),o.a.createElement("span",{className:"fw-bold"},function(e){var t=parseInt(e/60),r=Math.round(60*(e/60-t));return"".concat(t,"\u0447 ").concat(r,"\u043c")}(e.duration)))}function j(e){return e.details.map((function(e,t){return o.a.createElement("div",{key:t,className:"flight row"},o.a.createElement(w,{segment:e}),o.a.createElement(x,{duration:e.duration}),o.a.createElement(N,{stops:e.stops}))}))}function O(e){return o.a.createElement("div",{className:"card ticket"},o.a.createElement("div",{className:"row row_btwn"},o.a.createElement("span",{className:"price"},e.ticketInfo.price," \u0420"),o.a.createElement("div",{className:"logo-iata"},o.a.createElement("img",{src:"http://pics.avs.io/99/36/".concat(e.ticketInfo.carrier,".png"),alt:e.ticketInfo.carrier}))),o.a.createElement(j,{details:e.ticketInfo.segments}))}r(25);function C(){return o.a.createElement("div",{className:"row preloader__wrapper"},o.a.createElement("p",{className:"preloader__descr"},"\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435, \u0437\u0430\u0433\u0440\u0443\u0436\u0430\u0435\u043c \u043d\u043e\u0432\u044b\u0435 \u0431\u0438\u043b\u0435\u0442\u044b"),o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:{margin:"auto",background:"rgba(241, 242, 243, 0)",display:"block",shapeRendering:"auto"},width:"100px",height:"100px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},o.a.createElement("circle",{cx:"50",cy:"50",r:"32",strokeWidth:"2",stroke:"#2196f3",strokeDasharray:"50.26548245743669 50.26548245743669",fill:"none",strokeLinecap:"round",transform:"rotate(140.358 50 50)"},o.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"0.564102564102564s",keyTimes:"0;1",values:"0 50 50;360 50 50"}))))}function L(e){return e.ticketsArray?o.a.createElement("div",{className:"tickets"},e.ticketsArray.map((function(e,t){return o.a.createElement(O,{ticketInfo:e,key:t})}))):o.a.createElement(C,null)}var S=r(12);function M(e,t){if(t.all)return e;var r=Object.entries(t).filter((function(e){return e[1]})).map((function(e){return+e[0]}));return e.filter((function(e){return r.includes(function(e){return Math.max(e.segments[0].stops.length,e.segments[1].stops.length)}(e))}))}function I(e){return e.slice().sort((function(e,t){return e.segments.reduce((function(e,t){return e.duration+t.duration}))-t.segments.reduce((function(e,t){return e.duration+t.duration}))}))}function A(e){return e.slice().sort((function(e,t){return e.price-t.price}))}function D(e,t){return T.apply(this,arguments)}function T(){return(T=Object(_.a)(k.a.mark((function e(t,r){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H("https://front-test.beta.aviasales.ru/search");case 2:return n=e.sent,console.group("\u043f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u0431\u0438\u043b\u0435\u0442\u044b, searchID:",n),e.next=6,B("https://front-test.beta.aviasales.ru/tickets?searchId="+n);case 6:return a=M(a=e.sent,r),a=("cheapest"===t?A:I)(a),console.groupEnd(),e.abrupt("return",a.slice(0,5));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){return q.apply(this,arguments)}function q(){return(q=Object(_.a)(k.a.mark((function e(t){var r,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return r=e.sent,e.next=5,r.json();case 5:return n=e.sent,e.abrupt("return",n.searchId);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return F.apply(this,arguments)}function F(){return(F=Object(_.a)(k.a.mark((function e(t){var r,n,a,s;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],n=!1,a=0;case 3:if(n){e.next=14;break}return e.next=6,J(t);case 6:s=e.sent,n=s.stop,r.push.apply(r,Object(S.a)(s.tickets)),n&&console.log("\u043f\u043e\u0438\u0441\u043a \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d! stop:",s.stop,", count of tickets:",r.length),a>=100&&(console.warn("\u041d\u0435\u043f\u0440\u0435\u0434\u0432\u0438\u0434\u0435\u043d\u043d\u043e\u0435 \u043f\u0440\u0435\u0432\u044b\u0448\u0435\u043d\u0438\u0435 \u043a\u043e\u043b-\u0432\u0430 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432, \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u0435 \u043f\u043e\u0438\u0441\u043a\u0430"),n=!0),a+=1,e.next=3;break;case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return R.apply(this,arguments)}function R(){return(R=Object(_.a)(k.a.mark((function e(t){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if(500!==(r=e.sent).status){e.next=7;break}return e.next=6,J(t);case 6:return e.abrupt("return",e.sent);case 7:return e.next=9,r.json();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(n.a)(this,r);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={tickets:null},e}return Object(a.a)(r,[{key:"render",value:function(){return o.a.createElement("div",{className:"main row__col-main"},o.a.createElement(y,{onClick:this.props.onClick}),o.a.createElement(L,{ticketsArray:this.state.tickets}))}},{key:"componentDidMount",value:function(){var e=Object(_.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D(this.props.sort,this.props.filters);case 2:t=e.sent,this.setState({tickets:t});case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(_.a)(k.a.mark((function e(t){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===this.props){e.next=6;break}return this.setState({tickets:null}),e.next=4,D(this.props.sort,this.props.filters);case 4:r=e.sent,this.setState({tickets:r});case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(i.Component);function U(e,t){t.target.matches(".buffered")?(e.delete(t.target),t.target.classList.remove("buffered")):(e.add(t.target),t.target.classList.add("buffered"))}function W(e){e.forEach((function(e){return e.classList.remove("buffered")})),e.clear()}function Y(){var e=document.querySelector(".timeout"),t=document.querySelector(".timeout__tip");t.className="timeout__tip",e.className="timeout",t.classList.add("timeout__tip_run"),e.classList.add("timeout_run")}function z(){var e=document.querySelector(".timeout");document.querySelector(".timeout__tip").classList.remove("timeout__tip_run"),e.classList.remove("timeout_run")}function G(e){var t=this.state.filters,r=e.target.id;if(t[r]&&Object.entries(t).filter((function(e){return e[0]!==r})).every((function(e){return!e[1]})))return t;if(t.all&&!t[r]&&"all"!==r){var n=Object.assign({},this.state);return n.filters.all=!1,n.filters[r]=!n.filters[r],n.filters}if("all"===r&&Object.values(t).some((function(e){return e}))){var a=Object.assign({},this.state);for(var s in a.filters)a.filters.hasOwnProperty(s)&&(a.filters[s]=!1);return a.filters.all=!0,a.filters}var c=Object.assign({},this.state);return c.filters[r]=!c.filters[r],c.filters}function K(e,t){var r=Object.assign({},e.state),n=Q(t,[],[V]),a=new Set,s=Q(t,[U,Y],[W,z]);return function(t){t.currentTarget.classList.contains("tabs")?(r.sort=t.target.dataset.sorter,function(e){var t="tabs__item_active";e.target.classList.contains(t)||(e.currentTarget.querySelector("."+t).classList.remove(t),e.target.classList.add(t))}(t)):r.filters=G.call(e,t),s(a,t),n(e,r)}}var Q=function(e,t,r){var n;return function(){for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];clearTimeout(n),t.length>0&&t.forEach((function(e){return e.apply(void 0,s)})),n=setTimeout((function(){r.forEach((function(e){return e.apply(void 0,s)})),clearTimeout(n)}),e)}},V=function(e,t){e.setState((function(){return t}))},X=function(e){Object(s.a)(r,e);var t=Object(c.a)(r);function r(){var e;Object(n.a)(this,r);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={sort:"cheapest",filters:{all:!0,0:!1,1:!1,2:!1,3:!1}},e._timeoutBeforeSearch=2e3,e}return Object(a.a)(r,[{key:"render",value:function(){var e=K(this,this._timeoutBeforeSearch);return o.a.createElement("div",{className:"container"},o.a.createElement(f,null),o.a.createElement("div",{className:"row"},o.a.createElement(d,null)),o.a.createElement("div",{className:"row"},o.a.createElement(b,{filters:this.state.filters,onChange:e}),o.a.createElement(P,{onClick:e,filters:this.state.filters,sort:this.state.sort})))}}]),r}(i.Component);l.a.render(o.a.createElement(X,null),document.getElementById("root"))}],[[14,1,2]]]);
//# sourceMappingURL=main.2475cfb4.chunk.js.map